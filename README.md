# SelfCalibration

A project on survey design for precise self-calibration.

### Authors:

* Rory Holmes (MPIA)
* David W. Hogg (NYU)

### License:

**Copyright 2012 the authors.  All rights reserved.**

If you want to license this code for use or re-use, get in touch.

### Contributors:

* Hans-Walter Rix (MPIA)

### Dependencies:

* numpy
* matplotlib
* scipy

### Running the code:

A self-calibration simulation can be run by calling the `simulation.run_sim(parameter_dictionary)` function, where the `parameter_dictionary` contains all the parameters for this simulation run. This functions controls a full self-calibration simulation: it generates the synthetic sky, surveys the sky according to the specified survey strategy and then self-calibrates the resultant dataset. This function then returns the performance of the self-calibration procedure. See `default_parameters.py` for all of the required simulation parameters. Running the `plot.py` script on the output directory will produce plots from this self-calibration run. The package has been built in this way to allow for simple multiprocessing, as the `simulation.run_sim(parameter_dictionary)` function can be called multiple times in parallel with different parameter dictionaries. For example, to test how the self-calibration procedure is sensitive to the number of sources, one can simply run this function with multiple parameter dictionaries in which the number of sources parameter is varied. A number of sample scripts have been included to show how this package can be used.

### Modules:

This package contains seven modules for the self-calibration simulations:
* `analysis.py` contains the functions used to analyze the fitted instrument response relative to the *true* instrument response.
* `save_out.py` contains the functions that save out all the data from the simulation. NB that `data_dir` parameter in the parameter dictionary must be specified, otherwise no data is saved out from a simulation run.
* `self_calibration.py` contains the self-calibration procedures.
* `simulation.py` contains the master function that controls a full the full self-calibration simulation.
* `survey.py` contains the functions used to perform a survey of the synthetic sky, such as the imager measurement model.
* `transformations.py` contains useful transformation functions that are used throughout the code.
* `true_functions.py` contains all the functions representing the *true* parts of the simulations, such as the actual instrument response that is fitted for in the self-calibration simulations.  

### Plotting:

Plots for a simulation run can be generated by: `plot.py [output_directory]`.

### Parameters:

A complete parameter dictionary must be past to `simulation.run_sim()` for each simulation run. The code does not check for missing parameters before beginning the simulations. See `default_parameters.py` for a full list of required parameters.


### Known issues:

* ...

### Migration from svn:

Hogg migrated this from `svn` with something like

    cd
    git svn clone svn+ssh://astrometry.net/svn/trunk/projects/euclid/ --no-minimize-url --authors-file ~/authors
    cd euclid
    git remote add origin git@github.com:davidwhogg/SelfCalibration.git
    git push origin master
